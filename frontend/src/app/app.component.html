<main>
  <!-- SPINNER LOADING -->
  <ng-container *ngIf="isInitializingAuth || isInitializingVideoBg; else appContent">
    <!-- ✅ Affichage du loader -->
    <div class="loading-screen">
      <div class="loading-screen-content">
        <h1 class="loading-screen-title">Bubblebook</h1>
        <div class="spinner-container">
          <mat-spinner></mat-spinner>
        </div>
      </div>
    </div>

    <!-- ✅ Composant vidéo toujours affiché -->
    <app-background-video (videoLoaded)="onVideoLoaded()"></app-background-video>

    <!-- ✅ Router-outlet affiché aussi -->
    <router-outlet></router-outlet>
  </ng-container>

  <!-- FINI INITIALIZER -->
  <ng-template #appContent>
    <app-background-video (videoLoaded)="onVideoLoaded()"></app-background-video>

    <div class="globalMain">
      <div *ngIf="showUxButtons" class="app-div-settings" style="display: inline-flex; flex-direction: column;">
        <app-language-switch />
        <app-theme-switch />
      </div>

      <app-header *ngIf="showHeader" />
      <!-- ✅ Router-outlet affiché aussi -->
      <router-outlet></router-outlet>
      <app-nav-bottom-mobile *ngIf="showNavBottomMobile && isLoggedIn" [isLoggedIn]="isLoggedIn" />
      <app-footer *ngIf="showFooter" />
    </div>
  </ng-template>
</main>
